<?xml version="1.0" encoding="UTF-8"?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
    xmlns:p="http://primefaces.org/ui"
	template="/WEB-INF/templates/template.xhtml">

	<ui:define name="content">
		<h1><h:outputText value="Hello From JSF" /></h1>
		Message : #{homeBean.message}<br />
		<br />

        <p:commandButton id="showDialogButton" type="button" value="Show" onclick="dlg.show()" />

        <p:dialog header="Enter connection name" widgetVar="dlg" resizable="false">
            <h:form id="form">

                <h:panelGrid columns="2" style="margin-bottom:10px">
                    <h:outputLabel for="connectionname" value="Connection name:" />
                    <p:inputText id="connectionname" value="#{serverConnectionBean.serverConnection.name}" />
                    <h:outputLabel for="username" value="User name:" />
                    <p:inputText id="username" value="#{serverConnectionBean.serverConnection.userName}" />
                </h:panelGrid>

                <p:selectOneMenu id="connectiontype" value="#{serverConnectionBean.serverConnection.connectionType}">
                   <f:selectItems value="#{serverConnectionBean.connectionTypes}" />
<!--
                   <p:ajax update="suburbs"
                           listener="#{pprBean.handleCityChange}" />
-->
                </p:selectOneMenu>

<!--
                <p:selectOneMenu id="suburbs" value="#{pprBean.suburb}">
                   <f:selectItem itemLabel="Select Suburb" itemValue="" />
                   <f:selectItems value="#{pprBean.suburbs}" />
                </p:selectOneMenu>
-->

                <p:separator />
                <p:commandButton id="submitButton" value="Submit" update=":display" action="#{serverConnectionBean.saveServerConnection}" oncomplete="dlg.hide();"/>

            </h:form>
        </p:dialog>

        <p:outputPanel id="display" style="display:block;margin-top:10px;">
            <h:outputText id="name" value="Hello #{serverConnectionBean.serverConnection.name}" rendered="#{not empty serverConnectionBean.serverConnection.name}"/>
        </p:outputPanel>


        <h2>Tasks</h2>
		<table>
			<ui:repeat value="#{taskBean.tasks}" var="curTask">
				<tr>
					<td>#{curTask.id}</td>
					<td>#{curTask.description}</td>
				</tr>
			</ui:repeat>
		</table>

        <h:form>
			<div style="border-top: 1px solid #d0d0d0; margin-top: 12px; padding-top: 12px">
				<h:inputText value="#{taskBean.task.description}" id="taskDesc"/>
                <h:commandButton action="#{taskBean.saveTask}" value="Add" />
                <h:message for="taskDesc" style="color : red;padding-left : 8px"/>
            </div>
		</h:form>

	</ui:define>
</ui:composition>
